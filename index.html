<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AthleteRehab ‚Äî Sports Injury Forum</title>
<link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;600;700;900&family=Barlow:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0e14;
    --surface: #111620;
    --surface2: #1a2030;
    --border: #1e2a3a;
    --accent: #00d4ff;
    --accent2: #ff4d4d;
    --green: #00e676;
    --text: #e8edf5;
    --muted: #5a6a80;
    --card: #141c28;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Barlow', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Background grid */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(rgba(0,212,255,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,212,255,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  /* NAV */
  nav {
    position: sticky; top: 0; z-index: 100;
    background: rgba(10,14,20,0.9);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border);
    padding: 0 2rem;
    display: flex; align-items: center; justify-content: space-between;
    height: 64px;
  }
  .logo {
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 900;
    font-size: 1.6rem;
    letter-spacing: 1px;
  }
  .logo span { color: var(--accent); }
  .nav-links { display: flex; gap: 2rem; }
  .nav-links a {
    color: var(--muted); text-decoration: none;
    font-size: 0.85rem; font-weight: 500; letter-spacing: 0.5px;
    text-transform: uppercase;
    transition: color 0.2s;
  }
  .nav-links a:hover, .nav-links a.active { color: var(--accent); }
  .nav-badge {
    background: var(--accent); color: #000;
    font-size: 0.7rem; font-weight: 700;
    padding: 2px 8px; border-radius: 20px;
    letter-spacing: 0.5px;
  }

  /* HERO */
  .hero {
    position: relative; z-index: 1;
    padding: 5rem 2rem 3rem;
    text-align: center;
    max-width: 800px; margin: 0 auto;
  }
  .hero-tag {
    display: inline-block;
    border: 1px solid var(--accent);
    color: var(--accent);
    font-size: 0.7rem; font-weight: 600;
    letter-spacing: 2px; text-transform: uppercase;
    padding: 4px 14px; border-radius: 20px;
    margin-bottom: 1.5rem;
  }
  .hero h1 {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: clamp(2.8rem, 6vw, 5rem);
    font-weight: 900;
    line-height: 0.95;
    letter-spacing: -1px;
    margin-bottom: 1rem;
  }
  .hero h1 em { color: var(--accent); font-style: normal; }
  .hero p {
    color: var(--muted); font-size: 1.05rem;
    max-width: 520px; margin: 0 auto 2.5rem;
    line-height: 1.6;
  }

  /* SEARCH */
  .search-wrap {
    position: relative; max-width: 680px; margin: 0 auto;
  }
  .search-input {
    width: 100%;
    background: var(--surface);
    border: 1.5px solid var(--border);
    border-radius: 12px;
    padding: 1.1rem 1.5rem;
    padding-right: 130px;
    color: var(--text);
    font-family: 'Barlow', sans-serif;
    font-size: 1rem;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
  }
  .search-input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(0,212,255,0.1);
  }
  .search-input::placeholder { color: var(--muted); }
  .search-btn {
    position: absolute; right: 8px; top: 50%; transform: translateY(-50%);
    background: var(--accent); color: #000;
    border: none; border-radius: 8px;
    padding: 0.65rem 1.3rem;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700; font-size: 0.95rem; letter-spacing: 0.5px;
    cursor: pointer; transition: background 0.2s, transform 0.1s;
    white-space: nowrap;
  }
  .search-btn:hover { background: #33ddff; }
  .search-btn:active { transform: translateY(-50%) scale(0.97); }
  .search-btn:disabled { opacity: 0.6; cursor: not-allowed; }

  /* QUICK TAGS */
  .quick-tags {
    display: flex; flex-wrap: wrap; gap: 0.5rem;
    justify-content: center; margin-top: 1rem;
  }
  .quick-tag {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--muted);
    font-size: 0.78rem; padding: 4px 12px; border-radius: 20px;
    cursor: pointer; transition: all 0.2s;
  }
  .quick-tag:hover { border-color: var(--accent); color: var(--accent); }

  /* MAIN LAYOUT */
  .main {
    position: relative; z-index: 1;
    max-width: 1100px; margin: 3rem auto;
    padding: 0 2rem;
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: 2rem;
  }

  /* RESULTS / POSTS */
  .section-label {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.75rem; font-weight: 600; letter-spacing: 2px;
    text-transform: uppercase; color: var(--muted);
    margin-bottom: 1rem;
    display: flex; align-items: center; gap: 0.5rem;
  }
  .section-label::after {
    content: ''; flex: 1; height: 1px; background: var(--border);
  }

  /* AI RESULT */
  .ai-result {
    background: var(--card);
    border: 1px solid var(--accent);
    border-radius: 14px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    position: relative;
    overflow: hidden;
    display: none;
  }
  .ai-result.visible { display: block; animation: fadeIn 0.4s ease; }
  .ai-result::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0; height: 2px;
    background: linear-gradient(90deg, var(--accent), transparent);
  }
  .ai-badge {
    display: inline-flex; align-items: center; gap: 0.4rem;
    background: rgba(0,212,255,0.1); border: 1px solid rgba(0,212,255,0.3);
    color: var(--accent);
    font-size: 0.72rem; font-weight: 600; letter-spacing: 1px;
    text-transform: uppercase; padding: 3px 10px; border-radius: 20px;
    margin-bottom: 0.8rem;
  }
  .ai-badge::before { content: '‚óÜ'; font-size: 0.6rem; }
  .ai-result h3 {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 1.3rem; font-weight: 700; margin-bottom: 0.6rem;
  }
  .ai-result .content {
    color: #b0bdd0; font-size: 0.93rem; line-height: 1.7;
  }
  .loading-dots {
    display: inline-flex; gap: 4px; align-items: center;
  }
  .loading-dots span {
    width: 6px; height: 6px; background: var(--accent);
    border-radius: 50%; animation: bounce 1.2s infinite;
  }
  .loading-dots span:nth-child(2) { animation-delay: 0.2s; }
  .loading-dots span:nth-child(3) { animation-delay: 0.4s; }
  @keyframes bounce {
    0%, 60%, 100% { transform: translateY(0); }
    30% { transform: translateY(-6px); }
  }

  /* FORUM POSTS */
  .post-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.2rem 1.4rem;
    margin-bottom: 1rem;
    cursor: pointer;
    transition: border-color 0.2s, transform 0.2s;
  }
  .post-card:hover { border-color: rgba(0,212,255,0.4); transform: translateY(-1px); }
  .post-meta {
    display: flex; align-items: center; gap: 0.7rem;
    margin-bottom: 0.5rem;
  }
  .post-category {
    font-size: 0.68rem; font-weight: 600; letter-spacing: 1px;
    text-transform: uppercase; padding: 2px 8px; border-radius: 4px;
  }
  .cat-knee { background: rgba(0,230,118,0.1); color: var(--green); }
  .cat-shoulder { background: rgba(255,77,77,0.1); color: var(--accent2); }
  .cat-ankle { background: rgba(0,212,255,0.1); color: var(--accent); }
  .cat-back { background: rgba(255,200,0,0.1); color: #ffc800; }
  .cat-prevention { background: rgba(150,100,255,0.1); color: #9664ff; }
  .cat-rehab { background: rgba(0,230,118,0.1); color: var(--green); }
  .post-author { color: var(--muted); font-size: 0.8rem; }
  .post-card h4 {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 1.05rem; font-weight: 700; margin-bottom: 0.3rem;
  }
  .post-card p { color: var(--muted); font-size: 0.85rem; line-height: 1.5; }
  .post-footer {
    display: flex; gap: 1rem; margin-top: 0.8rem;
  }
  .post-stat { color: var(--muted); font-size: 0.78rem; display: flex; align-items: center; gap: 0.3rem; }

  /* SIDEBAR */
  .sidebar {}
  .sidebar-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.2rem;
    margin-bottom: 1.2rem;
  }
  .sidebar-card h3 {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 1rem; font-weight: 700;
    margin-bottom: 1rem;
    color: var(--text);
  }
  .stat-row {
    display: flex; justify-content: space-between; align-items: center;
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--border);
    font-size: 0.85rem;
  }
  .stat-row:last-child { border-bottom: none; }
  .stat-row span:last-child {
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700; font-size: 1rem; color: var(--accent);
  }
  .trend-item {
    display: flex; align-items: flex-start; gap: 0.6rem;
    padding: 0.5rem 0; border-bottom: 1px solid var(--border);
    cursor: pointer; transition: color 0.2s;
  }
  .trend-item:last-child { border-bottom: none; }
  .trend-item:hover .trend-title { color: var(--accent); }
  .trend-num {
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 900; font-size: 1.2rem; color: var(--border);
    min-width: 24px; line-height: 1;
  }
  .trend-title { font-size: 0.85rem; font-weight: 500; line-height: 1.3; }
  .trend-count { color: var(--muted); font-size: 0.75rem; margin-top: 2px; }

  /* NEW POST BTN */
  .new-post-btn {
    width: 100%;
    background: linear-gradient(135deg, var(--accent), #0099bb);
    color: #000; border: none; border-radius: 10px;
    padding: 0.9rem;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700; font-size: 1rem; letter-spacing: 0.5px;
    cursor: pointer; transition: opacity 0.2s, transform 0.1s;
    margin-bottom: 1.2rem;
  }
  .new-post-btn:hover { opacity: 0.9; transform: translateY(-1px); }

  /* MODAL */
  .modal-overlay {
    position: fixed; inset: 0; z-index: 999;
    background: rgba(0,0,0,0.85);
    backdrop-filter: blur(6px);
    display: flex; align-items: center; justify-content: center;
    padding: 1.5rem;
    opacity: 0; pointer-events: none;
    transition: opacity 0.25s ease;
  }
  .modal-overlay.active { opacity: 1; pointer-events: all; }
  .modal {
    background: var(--surface);
    border: 1px solid var(--accent);
    border-radius: 20px;
    width: 100%; max-width: 680px;
    max-height: 85vh;
    display: flex; flex-direction: column;
    overflow: hidden;
    transform: translateY(20px) scale(0.97);
    transition: transform 0.25s ease;
    position: relative;
  }
  .modal-overlay.active .modal { transform: translateY(0) scale(1); }
  .modal::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0; height: 3px;
    background: linear-gradient(90deg, var(--accent), #0066ff, var(--accent));
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }
  @keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
  .modal-header {
    display: flex; justify-content: space-between; align-items: flex-start;
    padding: 1.8rem 1.8rem 1rem;
    border-bottom: 1px solid var(--border);
  }
  .modal-tag {
    font-size: 0.68rem; font-weight: 700; letter-spacing: 2px;
    text-transform: uppercase; color: var(--accent);
    margin-bottom: 0.4rem;
  }
  .modal-header h2 {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 1.5rem; font-weight: 800;
    line-height: 1.2; max-width: 520px;
  }
  .modal-close {
    background: var(--card); border: 1px solid var(--border);
    color: var(--muted); width: 36px; height: 36px;
    border-radius: 50%; cursor: pointer;
    font-size: 0.9rem; flex-shrink: 0;
    transition: all 0.2s; margin-left: 1rem;
  }
  .modal-close:hover { border-color: var(--accent2); color: var(--accent2); }
  .modal-body {
    padding: 1.5rem 1.8rem;
    overflow-y: auto; flex: 1;
  }
  .modal-body .modal-para {
    color: #b0bdd0; font-size: 0.95rem;
    line-height: 1.75; margin-bottom: 0.8rem;
  }
  .modal-body .modal-point {
    color: #b0bdd0; font-size: 0.95rem;
    line-height: 1.75; margin-bottom: 0.8rem;
    padding-left: 0.5rem;
    border-left: 2px solid var(--accent);
  }
  .modal-body .modal-point strong { color: var(--accent); margin-right: 0.3rem; }
  .loading-wrap {
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    padding: 3rem 0; gap: 1rem;
    color: var(--muted); font-size: 0.9rem;
  }
  .modal-footer {
    padding: 1rem 1.8rem;
    border-top: 1px solid var(--border);
    display: flex; align-items: center; justify-content: space-between;
    gap: 1rem; flex-wrap: wrap;
  }
  .modal-footer span { color: var(--muted); font-size: 0.78rem; flex: 1; }
  .modal-ask-again {
    background: transparent; border: 1px solid var(--accent);
    color: var(--accent); padding: 0.5rem 1.2rem;
    border-radius: 8px; cursor: pointer;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700; font-size: 0.9rem;
    transition: all 0.2s; white-space: nowrap;
  }
  .modal-ask-again:hover { background: rgba(0,212,255,0.1); }

  /* VALUE PROPS */
  .value-props {
    position: relative; z-index: 1;
    max-width: 1100px; margin: 0 auto 1rem;
    padding: 0 2rem;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
  }
  .vp-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 1.4rem;
    transition: border-color 0.2s, transform 0.2s;
  }
  .vp-card:hover { border-color: rgba(0,212,255,0.4); transform: translateY(-2px); }
  .vp-icon { font-size: 1.6rem; margin-bottom: 0.6rem; }
  .vp-title {
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700; font-size: 1.05rem;
    margin-bottom: 0.4rem;
  }
  .vp-desc { color: var(--muted); font-size: 0.83rem; line-height: 1.6; }

  @media (max-width: 768px) {
    .value-props { grid-template-columns: 1fr; }
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @media (max-width: 768px) {
    .main { grid-template-columns: 1fr; }
    .nav-links { display: none; }
    .sidebar { order: -1; }
  }
</style>
</head>
<body>

<nav>
  <div class="logo">ATHLETE<span>REHAB</span></div>
  <div class="nav-links">
    <a href="#" class="active">Forum</a>
    <a href="#">Exercises</a>
    <a href="#">Recovery Plans</a>
    <a href="#">Professionals</a>
  </div>
  <span class="nav-badge">BETA</span>
</nav>

<div class="hero">
  <div class="hero-tag">Built for Athletes, By Athletes</div>
  <h1>The Injury Advice You<br><em>Actually Need to Hear.</em></h1>
  <p>Real answers for real athletes ‚Äî backed by sports medicine knowledge and the experiences of thousands who've dealt with the same injury, the same sport, the same grind.</p>

  <div class="search-wrap">
    <input class="search-input" id="searchInput" type="text" placeholder="e.g. ACL tear recovery timeline, shin splints prevention...">
    <button class="search-btn" id="searchBtn" onclick="doSearch()">Ask Now ‚Üó</button>
  </div>

  <div class="quick-tags">
    <button class="quick-tag" onclick="quickSearch('ACL tear recovery')">ACL Tear Recovery</button>
    <button class="quick-tag" onclick="quickSearch('rotator cuff injury treatment')">Rotator Cuff</button>
    <button class="quick-tag" onclick="quickSearch('shin splints prevention')">Shin Splints</button>
    <button class="quick-tag" onclick="quickSearch('ankle sprain rehab exercises')">Ankle Sprain</button>
    <button class="quick-tag" onclick="quickSearch('lower back pain athletes')">Lower Back Pain</button>
    <button class="quick-tag" onclick="quickSearch('hamstring strain recovery')">Hamstring Strain</button>
  </div>
</div>

<!-- VALUE PROPS -->
<div class="value-props">
  <div class="vp-card">
    <div class="vp-icon">‚ö°</div>
    <div class="vp-title">AI Answers, Instantly</div>
    <div class="vp-desc">Get sport-specific injury answers in seconds ‚Äî not generic Google results. Our AI is trained on sports medicine knowledge and talks like a coach, not a textbook.</div>
  </div>
  <div class="vp-card">
    <div class="vp-icon">üèÜ</div>
    <div class="vp-title">Real Athlete Experiences</div>
    <div class="vp-desc">AI gives you the science. Our community gives you the truth. Read from athletes who've had your exact injury, your sport, your timeline.</div>
  </div>
  <div class="vp-card">
    <div class="vp-icon">üéØ</div>
    <div class="vp-title">Sport-Specific Advice</div>
    <div class="vp-desc">A runner's knee and a basketball player's knee aren't the same problem. Get advice that actually fits your sport, position, and training level.</div>
  </div>
</div>

<div class="main">
  <div class="feed">

    <div class="section-label">Recent Discussions</div>

    <div class="post-card">
      <div class="post-meta">
        <span class="post-category cat-knee">Knee</span>
        <span class="post-author">JordanR ¬∑ 2h ago</span>
      </div>
      <h4>6 months post ACL surgery ‚Äî still feeling instability during lateral cuts</h4>
      <p>My surgeon cleared me at 5 months but I'm still not confident making sharp directional changes. Anyone else experience this? What exercises helped the most?</p>
      <div class="post-footer">
        <span class="post-stat">üí¨ 24 replies</span>
        <span class="post-stat">üëç 47</span>
        <span class="post-stat">üîñ Save</span>
      </div>
    </div>

    <div class="post-card">
      <div class="post-meta">
        <span class="post-category cat-shoulder">Shoulder</span>
        <span class="post-author">Maria_T ¬∑ 5h ago</span>
      </div>
      <h4>Best exercises to strengthen rotator cuff for overhead athletes?</h4>
      <p>I'm a volleyball player coming back from a partial tear. PT has me doing basic theraband work but I want to know what's been working for others at the 3-month mark.</p>
      <div class="post-footer">
        <span class="post-stat">üí¨ 18 replies</span>
        <span class="post-stat">üëç 33</span>
        <span class="post-stat">üîñ Save</span>
      </div>
    </div>

    <div class="post-card">
      <div class="post-meta">
        <span class="post-category cat-prevention">Prevention</span>
        <span class="post-author">CoachDave ¬∑ 8h ago</span>
      </div>
      <h4>Nordic hamstring curls ‚Äî the best single exercise for hamstring injury prevention?</h4>
      <p>Research keeps pointing to Nordic curls as a top-tier prevention tool. Here's how I've been programming them for my athletes and the results we've seen...</p>
      <div class="post-footer">
        <span class="post-stat">üí¨ 41 replies</span>
        <span class="post-stat">üëç 112</span>
        <span class="post-stat">üîñ Save</span>
      </div>
    </div>

    <div class="post-card">
      <div class="post-meta">
        <span class="post-category cat-ankle">Ankle</span>
        <span class="post-author">RunnerX ¬∑ 1d ago</span>
      </div>
      <h4>Grade 2 ankle sprain ‚Äî when is it actually safe to run again?</h4>
      <p>Rolled my ankle badly 3 weeks ago. MRI shows grade 2 lateral ligament sprain. My PT says 6 weeks but I have a half marathon in 8. Realistic or not?</p>
      <div class="post-footer">
        <span class="post-stat">üí¨ 29 replies</span>
        <span class="post-stat">üëç 58</span>
        <span class="post-stat">üîñ Save</span>
      </div>
    </div>

    <div class="post-card">
      <div class="post-meta">
        <span class="post-category cat-back">Back</span>
        <span class="post-author">PowerliftPete ¬∑ 1d ago</span>
      </div>
      <h4>Recurring lower back tightness after heavy deadlifts ‚Äî form issue or weakness?</h4>
      <p>Every time I push past 85% intensity on deadlifts I get significant lower back tightness for 2-3 days. Video analysis doesn't show obvious form breakdown. Thoughts?</p>
      <div class="post-footer">
        <span class="post-stat">üí¨ 55 replies</span>
        <span class="post-stat">üëç 89</span>
        <span class="post-stat">üîñ Save</span>
      </div>
    </div>

    <div class="post-card">
      <div class="post-meta">
        <span class="post-category cat-rehab">Rehab</span>
        <span class="post-author">Swimmer_Sam ¬∑ 2d ago</span>
      </div>
      <h4>Swimmer's shoulder rehab ‚Äî has anyone had success with dry needling?</h4>
      <p>My PT recommended dry needling for my subscapularis trigger points. A bit nervous about it. Would love to hear from other swimmers who've tried it.</p>
      <div class="post-footer">
        <span class="post-stat">üí¨ 16 replies</span>
        <span class="post-stat">üëç 27</span>
        <span class="post-stat">üîñ Save</span>
      </div>
    </div>

  </div>

  <div class="sidebar">
    <button class="new-post-btn">+ Start a Discussion</button>

    <div class="sidebar-card">
      <h3>üìä Community Stats</h3>
      <div class="stat-row"><span>Athletes</span><span>12,480</span></div>
      <div class="stat-row"><span>Discussions</span><span>8,340</span></div>
      <div class="stat-row"><span>Questions Answered</span><span>31,200</span></div>
      <div class="stat-row"><span>Active Today</span><span>1,024</span></div>
    </div>

    <div class="sidebar-card">
      <h3>üî• Trending Topics</h3>
      <div class="trend-item" onclick="quickSearch('ACL tear recovery protocol')">
        <span class="trend-num">01</span>
        <div><div class="trend-title">ACL Recovery Protocols</div><div class="trend-count">342 posts this week</div></div>
      </div>
      <div class="trend-item" onclick="quickSearch('patellofemoral syndrome exercises')">
        <span class="trend-num">02</span>
        <div><div class="trend-title">Patellofemoral Syndrome</div><div class="trend-count">218 posts this week</div></div>
      </div>
      <div class="trend-item" onclick="quickSearch('stress fracture return to sport')">
        <span class="trend-num">03</span>
        <div><div class="trend-title">Stress Fracture Return-to-Sport</div><div class="trend-count">197 posts this week</div></div>
      </div>
      <div class="trend-item" onclick="quickSearch('plantar fasciitis treatment athletes')">
        <span class="trend-num">04</span>
        <div><div class="trend-title">Plantar Fasciitis</div><div class="trend-count">184 posts this week</div></div>
      </div>
      <div class="trend-item" onclick="quickSearch('concussion return to play protocol')">
        <span class="trend-num">05</span>
        <div><div class="trend-title">Concussion Protocols</div><div class="trend-count">156 posts this week</div></div>
      </div>
    </div>

    <div class="sidebar-card" style="border-color: rgba(0,230,118,0.3)">
      <h3 style="color: var(--green)">‚öïÔ∏è Disclaimer</h3>
      <p style="font-size:0.8rem; color:var(--muted); line-height:1.6">AI answers and forum posts are for informational purposes only. Always consult a qualified sports medicine professional or physical therapist before starting any rehab program.</p>
    </div>
  </div>
</div>

<!-- MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
  <div class="modal" id="modal">
    <div class="modal-header">
      <div>
        <div class="modal-tag">Answer</div>
        <h2 id="modalQuestion"></h2>
      </div>
      <button class="modal-close" onclick="closeModalBtn()">‚úï</button>
    </div>
    <div class="modal-body" id="modalContent">
      <div class="loading-wrap">
        <div class="loading-dots"><span></span><span></span><span></span></div>
        <p>Finding the best answer for you...</p>
      </div>
    </div>
    <div class="modal-footer">
      <span>‚öïÔ∏è For personal medical advice, always consult a sports medicine professional.</span>
      <button class="modal-ask-again" onclick="closeModalBtn()">Ask Another Question</button>
    </div>
  </div>
</div>

<script>
  function quickSearch(query) {
    document.getElementById('searchInput').value = query;
    doSearch();
  }

  function closeModal(e) {
    if (e.target === document.getElementById('modalOverlay')) closeModalBtn();
  }

  function closeModalBtn() {
    document.getElementById('modalOverlay').classList.remove('active');
    document.body.style.overflow = '';
  }

  async function doSearch() {
    const query = document.getElementById('searchInput').value.trim();
    if (!query) return;

    const overlay = document.getElementById('modalOverlay');
    const modalQuestion = document.getElementById('modalQuestion');
    const modalContent = document.getElementById('modalContent');
    const btn = document.getElementById('searchBtn');

    modalQuestion.textContent = query;
    modalContent.innerHTML = `<div class="loading-wrap"><div class="loading-dots"><span></span><span></span><span></span></div><p>Finding the best answer for you...</p></div>`;
    overlay.classList.add('active');
    document.body.style.overflow = 'hidden';
    btn.disabled = true;
    btn.textContent = 'Loading...';

    try {
      const response = await fetch("https://api.anthropic.com/v1/messages", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          model: "claude-sonnet-4-20250514",
          max_tokens: 1000,
          system: "You are a knowledgeable sports medicine assistant on an athlete forum. Answer questions about sports injuries, rehabilitation, and injury prevention clearly and practically. Use evidence-based information. Format your response with clear structure using short paragraphs. Include: 1) A brief explanation of the injury/topic, 2) Key recovery/prevention steps, 3) Important warning signs to watch for. Keep it under 300 words and write in a helpful, direct tone for athletes. End with a brief reminder to consult a sports medicine professional for personal advice.",
          messages: [{ role: "user", content: query }]
        })
      });

      const data = await response.json();
      const text = data.content?.[0]?.text || "Sorry, I couldn't generate an answer. Please try again.";

      const formatted = text.split('\n').filter(l => l.trim()).map(line => {
        if (line.match(/^\d+\)/)) return `<p class="modal-point"><strong>${line.substring(0,3)}</strong>${line.substring(3)}</p>`;
        return `<p class="modal-para">${line}</p>`;
      }).join('');

      modalContent.innerHTML = formatted;
    } catch (e) {
      modalContent.innerHTML = '<p style="color:var(--accent2)">Could not fetch an answer. Please try again.</p>';
    }

    btn.disabled = false;
    btn.textContent = 'Ask Now ‚Üó';
  }

  document.getElementById('searchInput').addEventListener('keydown', e => {
    if (e.key === 'Enter') doSearch();
  });

  document.addEventListener('keydown', e => {
    if (e.key === 'Escape') closeModalBtn();
  });
</script>
</body>
</html>
